#!/bin/sh

# This script is useful for when connecting to ephemeral hosts
# (for example, virtual machines) whose characteristic change quite often.
#
# The script just checks if there are any parameters and if so passes them
# directly to ssh.
#
# The UserKnownHostsFile parameter specifies the database file to use for storing the user host keys (default is ~/.ssh/known_hosts). By configuring the null device file as the host key database, SSH is fooled into thinking that the SSH client has never connected to any SSH server before, and so will never run into a mismatched host key.

# The parameter StrictHostKeyChecking specifies if SSH will automatically add new host keys to the host key database file. By setting it to no, the host key is automatically added, without user confirmation, for all first-time connection. Because of the null key database file, all connection is viewed as the first-time for any SSH server host. Therefore, the host key is automatically added to the host key database with no user confirmation. Writing the key to the /dev/null file discards the key and reports success.

ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no "$@"
